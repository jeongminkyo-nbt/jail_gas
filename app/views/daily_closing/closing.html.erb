<h1>일일장부</h1>

<%= form_tag daily_closing_2_path, method: :get, class: 'form-inline search-user-form' do %>
  <%= select_tag 'daily_closing_date', options_for_select(DailyClosing.all.map{|a| [a.date,a.id] })  %>
  <button class="btn btn-default" type="submit">검색</button>
<% end %>

<table class="table table-hover no-more-tables" style="margin-top: 20px;">
  <thead>
  <tr>
    <th class="h-align"><%= check_box_tag 'delivaries_checkall' %></th>
    <th class="h-align">날짜</th>
    <th class="h-align">배달지</th>
    <th class="h-align">품목</th>
    <th class="h-align">수량</th>
  </tr>
  </thead>
  <tbody>
  <% @delivary.each do |delivary| %>
    <tr>
      <td><%= check_box_tag 'delivary_ids[]', delivary.id %></td>
      <td><%= delivary.date %></td>
      <td><%= delivary.name %></td>
      <td><%= delivary.product_name %></td>
      <td><%= delivary.product_num %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<button class="btn-sm">
  <%= link_to '추가', new_credit_path %>
</button>

<script>
    $(document).ready(function () {
        //최상단 체크박스 클릭
        $("#delivaries_checkall").click(function () {
            //클릭되었으면
            if ($("#delivaries_checkall").prop("checked")) {
                //input태그의 name이 chk인 태그들을 찾아서 checked옵션을 true로 정의
                $("input[id=delivary_ids_]").prop("checked", true);

                //클릭이 안되있으면
            } else {
                //input태그의 name이 chk인 태그들을 찾아서 checked옵션을 false로 정의
                $("input[id=delivary_ids_]").prop("checked", false);
            }
        });
    })
</script>